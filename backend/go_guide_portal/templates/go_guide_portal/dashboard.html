{% extends "go_guide_portal/base.html" %}
{% block content %}
<div class="bg-panel rounded-xl p-6 mb-6 border border-white/5">
  <h1 class="text-2xl font-semibold mb-2">Добро пожаловать, {{ user_name }}!</h1>
  <p class="text-muted">Площадка: {% if unit %}{{ unit.name }}{% else %}не привязана{% endif %}</p>
</div>

<div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
  <div class="bg-panel rounded-xl p-4 border border-white/5">
    <div class="text-muted text-sm">Активные записи</div>
    <div class="text-3xl font-bold mt-2">{{ active_appointments|default:0 }}</div>
  </div>
  <div class="bg-panel rounded-xl p-4 border border-white/5">
    <div class="text-muted text-sm">Всего записей</div>
    <div class="text-3xl font-bold mt-2">{{ total_appointments|default:0 }}</div>
  </div>
  <div class="bg-panel rounded-xl p-4 border border-white/5">
    <div class="text-muted text-sm">Выручка</div>
    <div class="text-3xl font-bold mt-2">{{ total_revenue|default:0 }} ₽</div>
  </div>
  <div class="bg-panel rounded-xl p-4 border border-white/5">
    <div class="text-muted text-sm">Услуг</div>
    <div class="text-3xl font-bold mt-2">{{ total_services|default:0 }}</div>
  </div>
</div>

<div class="bg-panel rounded-xl p-6 border border-white/5">
  <h3 class="text-lg font-semibold mb-4">Последние записи</h3>
  <div class="overflow-x-auto">
    <table class="min-w-full text-sm">
      <thead class="text-muted">
        <tr class="border-b border-white/5">
          <th class="text-left py-2">Клиент</th>
          <th class="text-left py-2">Услуга</th>
          <th class="text-left py-2">Начало</th>
          <th class="text-left py-2">Окончание</th>
          <th class="text-left py-2">Статус</th>
        </tr>
      </thead>
      <tbody>
        {% for app in recent_appointments %}
        <tr class="border-b border-white/5">
          <td class="py-2">{{ app.client_name }}</td>
          <td class="py-2">{{ app.service.title }}</td>
          <td class="py-2">{{ app.start_at }}</td>
          <td class="py-2">{{ app.end_at }}</td>
          <td class="py-2">{% if app.is_confirmed %}Подтверждено{% else %}Ожидает{% endif %}</td>
        </tr>
        {% empty %}
        <tr><td colspan="5" class="py-3 text-muted">Нет записей</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}

